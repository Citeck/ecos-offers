{
  "id" : "offer-selection-candidate-form",
  "formKey" : "offer-selection-candidate-form",
  "title" : {
    "en" : "Offer Selection Candidate Form"
  },
  "description" : { },
  "customModule" : null,
  "typeRef" : "emodel/type@offer-selection-candidates-type",
  "width" : "lg",
  "system" : false,
  "i18n" : {
    "ru" : {
      "idocs:registrationNumber" : "Регистрационный номер",
      "Save" : "Сохранить",
      "Cancel" : "Отмена",
      "generateNumber" : "Сгенерировать номер",
      "Create" : "Отправить на согласование",
      "cm:created" : "Дата создания",
      "idocs:initiator" : "Инициатор",
      "cm:content" : "Содержимое"
    }
  },
  "definition" : {
    "components" : [ {
      "scrollableContent" : true,
      "key" : "panel6",
      "type" : "panel",
      "input" : false,
      "components" : [ {
        "title" : "Регистрация",
        "key" : "panel5",
        "type" : "panel",
        "input" : false,
        "components" : [ {
          "columns" : [ {
            "components" : [ {
              "label" : "idocs:registrationNumber",
              "defaultValue" : "",
              "key" : "idocs_registrationNumber",
              "properties" : {
                "attribute" : "idocs:registrationNumber"
              },
              "logic" : [ {
                "name" : "disable-reg-number",
                "trigger" : {
                  "type" : "javascript",
                  "javascript" : "const { generateNumber = {} } = data || {};\nresult = (instance.options.formMode === 'CREATE') && generateNumber;"
                },
                "actions" : [ {
                  "name" : "disabled",
                  "type" : "property",
                  "property" : {
                    "label" : "Disabled",
                    "value" : "disabled",
                    "type" : "boolean"
                  },
                  "state" : "true"
                } ]
              }, {
                "name" : "mandatory-reg-number",
                "trigger" : {
                  "type" : "javascript",
                  "javascript" : "const { generateNumber = {} } = data || {};\nresult = (instance.options.formMode !== 'CREATE') || !generateNumber;"
                },
                "actions" : [ {
                  "name" : "set-mandatory-true",
                  "type" : "property",
                  "property" : {
                    "label" : "Required",
                    "value" : "validate.required",
                    "type" : "boolean"
                  },
                  "state" : "true"
                } ]
              } ],
              "type" : "textfield",
              "input" : true
            }, {
              "label" : "generateNumber",
              "labelPosition" : "right-right",
              "persistent" : "client-only",
              "clearOnHide" : false,
              "defaultValue" : true,
              "key" : "generateNumber",
              "customConditional" : "show = instance.options.formMode === 'CREATE'",
              "type" : "checkbox",
              "input" : true
            } ],
            "type" : "column",
            "input" : false,
            "key" : "column",
            "index" : 0
          }, {
            "index" : 1,
            "type" : "column",
            "input" : false,
            "key" : "column",
            "components" : [ {
              "label" : "cm:created",
              "format" : "dd.MM.yyyy",
              "disabled" : true,
              "enableDate" : false,
              "datePicker" : {
                "minDate" : "",
                "maxDate" : ""
              },
              "enableTime" : false,
              "defaultDate" : "moment();",
              "defaultValue" : "",
              "key" : "cm_created",
              "properties" : {
                "attribute" : "cm:created"
              },
              "type" : "datetime",
              "input" : true,
              "suffix" : true
            } ]
          } ],
          "key" : "columns8",
          "type" : "columns",
          "input" : false
        } ]
      }, {
        "title" : "Основное",
        "key" : "panel2",
        "type" : "panel",
        "input" : false,
        "components" : [ {
          "label" : {
            "ru" : "Columns"
          },
          "key" : "objectObject",
          "columns" : [ {
            "components" : [ {
              "label" : {
                "ru" : "Запрос"
              },
              "key" : "offerRequest",
              "validate" : {
                "required" : true
              },
              "modalTitle" : "",
              "journalId" : "offer-request-journal",
              "queryData" : "",
              "refreshOn" : [ ],
              "optionalWhenDisabled" : false,
              "type" : "selectJournal",
              "input" : true
            } ],
            "type" : "column",
            "input" : false,
            "key" : "column",
            "index" : 0
          }, {
            "index" : 1,
            "type" : "column",
            "input" : false,
            "key" : "column",
            "components" : [ {
              "label" : {
                "ru" : "Кандидат"
              },
              "key" : "offerCandidate",
              "validate" : {
                "required" : true
              },
              "modalTitle" : "",
              "journalId" : "offer-candidate-journal",
              "queryData" : "",
              "refreshOn" : [ ],
              "optionalWhenDisabled" : false,
              "type" : "selectJournal",
              "input" : true
            }, {
              "label" : {
                "ru" : "Дедлайн ответа"
              },
              "key" : "offerTermResponse",
              "format" : "yyyy-MM-dd",
              "datePicker" : {
                "minDate" : "",
                "maxDate" : ""
              },
              "enableTime" : false,
              "defaultValue" : "",
              "refreshOn" : [ ],
              "optionalWhenDisabled" : false,
              "type" : "datetime",
              "input" : true,
              "suffix" : true
            } ]
          } ],
          "oneColumnInViewMode" : false,
          "type" : "columns",
          "input" : false
        }, {
          "label" : {
            "ru" : "Columns"
          },
          "key" : "columns10",
          "columns" : [ {
            "components" : [ {
              "label" : "idocs:initiator",
              "allowedAuthorityType" : "USER",
              "currentUserByDefault" : true,
              "defaultValue" : "",
              "validate" : {
                "required" : true
              },
              "key" : "idocs_initiator",
              "properties" : {
                "attribute" : "idocs:initiator"
              },
              "type" : "selectOrgstruct",
              "input" : true
            }, {
              "label" : "Подразделение",
              "allowedAuthorityType" : "GROUP",
              "isIncludedAdminGroup" : true,
              "defaultValue" : "",
              "validate" : {
                "required" : true
              },
              "key" : "offerSubdivision",
              "type" : "selectOrgstruct",
              "input" : true
            }, {
              "label" : {
                "ru" : "Руководитель подразделения"
              },
              "key" : "offerManagerSubdivision",
              "validate" : {
                "required" : true
              },
              "allowedAuthorityType" : "USER",
              "defaultValue" : "",
              "refreshOn" : [ ],
              "optionalWhenDisabled" : false,
              "type" : "selectOrgstruct",
              "input" : true
            }, {
              "label" : {
                "ru" : "Город"
              },
              "key" : "offerCity",
              "validate" : {
                "required" : true
              },
              "modalTitle" : "",
              "journalId" : "cities-journal",
              "refreshOn" : [ ],
              "optionalWhenDisabled" : false,
              "type" : "selectJournal",
              "input" : true,
              "queryData" : ""
            } ],
            "type" : "column",
            "input" : false,
            "key" : "column",
            "index" : 0
          }, {
            "index" : 1,
            "type" : "column",
            "input" : false,
            "key" : "column",
            "components" : [ {
              "label" : {
                "ru" : "Должность"
              },
              "key" : "offerPosition",
              "validate" : {
                "required" : true
              },
              "modalTitle" : "",
              "journalId" : "offer-position-journal",
              "refreshOn" : [ ],
              "optionalWhenDisabled" : false,
              "type" : "selectJournal",
              "input" : true,
              "queryData" : ""
            }, {
              "label" : {
                "ru" : "Грейд"
              },
              "key" : "offerGrade",
              "validate" : {
                "required" : true
              },
              "modalTitle" : "",
              "journalId" : "offer-grades-journal",
              "refreshOn" : [ "offerPosition" ],
              "customDefaultValue" : "value = \"\";",
              "calculateValue" : "value = data.asyncDataForGrade.records[0].id || {};",
              "allowCalculateOverride" : true,
              "optionalWhenDisabled" : false,
              "type" : "selectJournal",
              "input" : true,
              "queryData" : ""
            }, {
              "label" : {
                "ru" : "Опыт работы"
              },
              "key" : "offerExperience",
              "validate" : {
                "required" : true
              },
              "modalTitle" : "",
              "journalId" : "offer-experience-journal",
              "queryData" : "",
              "refreshOn" : [ ],
              "optionalWhenDisabled" : false,
              "type" : "selectJournal",
              "input" : true
            }, {
              "label" : {
                "ru" : "Зарплатная вилка и премия"
              },
              "key" : "offerSalaryAndPrize",
              "validate" : {
                "maxLength" : 30
              },
              "defaultValue" : "",
              "refreshOn" : [ "offerPosition" ],
              "calculateValue" : "value = data.asyncDataForSalaryAndPrize.records[0].gradesSalary + \"; \" + data.asyncDataForSalaryAndPrize.records[0].gradesPrize;",
              "allowCalculateOverride" : true,
              "optionalWhenDisabled" : false,
              "type" : "textfield",
              "input" : true
            }, {
              "label" : {
                "ru" : "Срок"
              },
              "key" : "offerTerm",
              "format" : "yyyy-MM-dd",
              "datePicker" : {
                "minDate" : "",
                "maxDate" : ""
              },
              "enableTime" : false,
              "defaultValue" : "",
              "refreshOn" : [ ],
              "optionalWhenDisabled" : false,
              "type" : "datetime",
              "input" : true,
              "suffix" : true
            } ]
          } ],
          "oneColumnInViewMode" : false,
          "type" : "columns",
          "input" : false
        }, {
          "columns" : [ {
            "components" : [ {
              "label" : "Комментарий",
              "defaultValue" : "",
              "validate" : {
                "maxLength" : 250
              },
              "key" : "offerComment",
              "type" : "textarea",
              "input" : true
            }, {
              "label" : {
                "ru" : "Фидбэк по техническому собеседованию"
              },
              "key" : "offerTechFeedback",
              "validate" : {
                "maxLength" : 250
              },
              "defaultValue" : "",
              "refreshOn" : [ ],
              "optionalWhenDisabled" : false,
              "type" : "textarea",
              "input" : true
            }, {
              "label" : {
                "ru" : "Фидбэк по вводному собеседованию"
              },
              "key" : "offerIntroductoryFeedback",
              "validate" : {
                "maxLength" : 250
              },
              "defaultValue" : "",
              "refreshOn" : [ ],
              "optionalWhenDisabled" : false,
              "type" : "textarea",
              "input" : true
            } ],
            "type" : "column",
            "input" : false,
            "key" : "column",
            "index" : 0,
            "md" : 12
          } ],
          "key" : "columns4",
          "type" : "columns",
          "input" : false
        }, {
          "title" : "Особые условия",
          "key" : "panel3",
          "type" : "panel",
          "input" : false,
          "components" : [ {
            "columns" : [ {
              "components" : [ {
                "label" : "Оклад",
                "isBigNumber" : false,
                "delimiterValue" : "",
                "key" : "offerSalary",
                "defaultValue" : "",
                "type" : "number",
                "input" : true
              } ],
              "type" : "column",
              "input" : false,
              "key" : "column",
              "index" : 0
            }, {
              "index" : 1,
              "type" : "column",
              "input" : false,
              "key" : "column",
              "components" : [ {
                "label" : "Премия",
                "defaultValue" : "",
                "validate" : {
                  "maxLength" : 30
                },
                "key" : "offerPrize",
                "type" : "textfield",
                "input" : true
              } ]
            } ],
            "key" : "columns6",
            "type" : "columns",
            "input" : false
          }, {
            "columns" : [ {
              "components" : [ {
                "label" : "График работы",
                "defaultValue" : "",
                "validate" : {
                  "maxLength" : 50
                },
                "key" : "offerSchedule",
                "type" : "textfield",
                "input" : true
              } ],
              "type" : "column",
              "input" : false,
              "key" : "column",
              "index" : 0
            }, {
              "index" : 1,
              "type" : "column",
              "input" : false,
              "key" : "column",
              "components" : [ {
                "label" : "Дата выхода на работу",
                "format" : "yyyy-MM-dd",
                "datePicker" : {
                  "minDate" : "",
                  "maxDate" : ""
                },
                "defaultValue" : "",
                "key" : "offerDateWork",
                "type" : "datetime",
                "input" : true,
                "suffix" : true
              } ]
            } ],
            "key" : "columns7",
            "type" : "columns",
            "input" : false
          }, {
            "title" : "Документы",
            "key" : "panel4",
            "type" : "panel",
            "input" : false,
            "components" : [ {
              "label" : {
                "ru" : "cm:content"
              },
              "key" : "cm_content",
              "storage" : "url",
              "url" : "/share/proxy/alfresco/eform/file",
              "options" : "",
              "refreshOn" : [ ],
              "optionalWhenDisabled" : false,
              "properties" : {
                "attribute" : "cm:content"
              },
              "type" : "file",
              "input" : true
            } ]
          } ]
        } ]
      } ]
    }, {
      "label" : "AsyncData",
      "source" : {
        "type" : "recordsQuery",
        "recordsQuery" : {
          "query" : "const {offerPosition = null} = data;\r\nvar value = {\r\n    query: {t: 'and', val: [\r\n        {t: 'eq', att: '_type', val: 'emodel/type@hr-grades-type'},\r\n        {t: \"eq\", att: \"gradesSimpleRoleTypeAssoc\", val: offerPosition},\r\n    ]},\r\n    language: 'predicate'\r\n}",
          "attributes" : { },
          "isSingle" : false
        },
        "forceLoad" : false
      },
      "update" : {
        "type" : "disabled"
      },
      "refreshOn" : [ {
        "label" : "offerPosition",
        "value" : "offerPosition"
      } ],
      "key" : "asyncDataForGrade",
      "type" : "asyncData",
      "input" : true
    }, {
      "label" : "AsyncData2",
      "source" : {
        "type" : "recordsQuery",
        "recordsQuery" : {
          "attributes" : {
            "gradesSalary" : "gradesSalary",
            "gradesPrize" : "gradesPrize"
          },
          "query" : "console.log(data);\r\nconst {offerPosition = null} = data;\r\nvar value = {\r\n    query: {t: 'and', val: [\r\n        {t: 'eq', att: '_type', val: 'emodel/type@hr-grades-type'},\r\n        {t: \"eq\", att: \"gradesSimpleRoleTypeAssoc\", val: offerPosition},\r\n    ]},\r\n    language: 'predicate'\r\n}",
          "isSingle" : false
        },
        "forceLoad" : false
      },
      "update" : {
        "type" : "disabled"
      },
      "refreshOn" : [ {
        "label" : "offerPosition",
        "value" : "offerPosition"
      } ],
      "key" : "asyncDataForSalaryAndPrize",
      "type" : "asyncData",
      "input" : true
    }, {
      "columns" : [ {
        "components" : [ {
          "label" : "Cancel",
          "action" : "event",
          "state" : "",
          "block" : true,
          "key" : "submit2",
          "type" : "button",
          "input" : true,
          "showValidations" : false,
          "event" : "cancel"
        } ],
        "md" : 4,
        "type" : "column",
        "input" : false,
        "key" : "column",
        "index" : 0
      }, {
        "md" : 4,
        "type" : "column",
        "input" : false,
        "key" : "column",
        "index" : 1,
        "components" : [ {
          "label" : "Save",
          "state" : "draft",
          "block" : true,
          "key" : "submit2",
          "type" : "button",
          "input" : true
        } ]
      }, {
        "md" : 4,
        "type" : "column",
        "input" : false,
        "key" : "column",
        "index" : 2,
        "components" : [ {
          "label" : "Create",
          "state" : "",
          "theme" : "primary",
          "block" : true,
          "disableOnInvalid" : true,
          "key" : "submit",
          "type" : "button",
          "input" : true
        } ]
      } ],
      "key" : "columns9",
      "type" : "columns",
      "input" : false
    } ]
  },
  "attributes" : { }
}